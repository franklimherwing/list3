<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Grocery List App</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    h1 {
      text-align: center;
    }
    #input-area {
      display: flex;
      justify-content: center;
      margin-bottom: 20px;
    }
    #item-input {
      width: 250px;
      padding: 8px;
      font-size: 14px;
      border: 1px solid #ccc;
      border-radius: 4px 0 0 4px;
    }
    #mic-btn {
      background: #eee;
      border: 1px solid #ccc;
      border-left: none;
      padding: 0 10px;
      cursor: pointer;
      border-radius: 0 4px 4px 0;
    }
    #mic-btn:hover {
      background: #ddd;
    }
    #categories {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
    }
    .category {
      border: 1px solid #ccc;
      border-radius: 6px;
      padding: 10px;
      background: #f9f9f9;
    }
    .category h2 {
      margin-top: 0;
      font-size: 18px;
    }
    ul {
      padding-left: 20px;
    }
  </style>
</head>
<body>
  <h1>Grocery List</h1>
  
  <div id="input-area">
    <input type="text" id="item-input" placeholder="Add grocery item..." />
    <button id="mic-btn">🎤</button>
  </div>

  <div id="categories"></div>

  <script>
    const categories = {
      "Produce": ["Apples", "Bananas", "Carrots", "Broccoli", "Spinach"],
      "Dairy": ["Milk", "Cheese", "Yogurt", "Butter"],
      "Meat": ["Chicken", "Beef", "Pork", "Fish"],
      "Pantry": ["Rice", "Pasta", "Cereal", "Flour", "Sugar"],
      "Frozen": ["Ice Cream", "Frozen Pizza", "Peas", "French Fries"],
      "Beverages": ["Coffee", "Tea", "Orange Juice", "Soda", "Water"],
      "Household": ["Paper Towels", "Dish Soap", "Laundry Detergent", "Toilet Paper"],
      "Other": []
    };

    const categoryKeywords = {
      "Produce": ["apple", "banana", "carrot", "broccoli", "spinach", "lettuce", "onion", "potato", "tomato"],
      "Dairy": ["milk", "cheese", "yogurt", "butter", "cream", "eggs"],
      "Meat": ["chicken", "beef", "pork", "fish", "steak", "turkey"],
      "Pantry": ["rice", "pasta", "cereal", "flour", "sugar", "beans", "oil"],
      "Frozen": ["ice cream", "frozen pizza", "peas", "fries", "berries"],
      "Beverages": ["coffee", "tea", "juice", "soda", "water"],
      "Household": ["paper towels", "soap", "detergent", "toilet paper", "cleaner"]
    };

    const categoriesDiv = document.getElementById("categories");
    const input = document.getElementById("item-input");

    function renderCategories() {
      categoriesDiv.innerHTML = "";
      for (let category in categories) {
        const catDiv = document.createElement("div");
        catDiv.className = "category";
        const h2 = document.createElement("h2");
        h2.textContent = category;
        catDiv.appendChild(h2);

        const ul = document.createElement("ul");
        categories[category].forEach(item => {
          const li = document.createElement("li");
          li.textContent = item;
          ul.appendChild(li);
        });

        catDiv.appendChild(ul);
        categoriesDiv.appendChild(catDiv);
      }
    }

    function addItem(item) {
      item = item.trim();
      if (!item) return;

      let placed = false;
      for (let cat in categoryKeywords) {
        if (categoryKeywords[cat].some(keyword => item.toLowerCase().includes(keyword))) {
          categories[cat].push(item);
          placed = true;
          break;
        }
      }
      if (!placed) {
        categories["Other"].push(item);
      }
      renderCategories();
    }

    input.addEventListener("keydown", function (e) {
      if (e.key === "Enter") {
        addItem(input.value);
        input.value = "";
      }
    });

    // Microphone functionality
    const micBtn = document.getElementById("mic-btn");
    let recognition;
    if ("webkitSpeechRecognition" in window) {
      recognition = new webkitSpeechRecognition();
      recognition.continuous = false;
      recognition.interimResults = false;
      recognition.lang = "en-US";

      recognition.onresult = function (event) {
        const transcript = event.results[0][0].transcript;
        input.value = transcript;
        addItem(transcript);
        input.value = "";
      };
    } else {
      micBtn.disabled = true;
      micBtn.textContent = "❌";
    }

    micBtn.addEventListener("click", () => {
      if (recognition) recognition.start();
    });

    renderCategories();
  </script>
</body>
</html>
